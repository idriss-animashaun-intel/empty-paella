# External inputs from ScanFI data:
#   {Pattern name}
#   {Failing pin}
#   {Label offset to cycle failure in Scan memory}

# Define content variable
DEFINE: CONTENT_TYPE: MAIN

# Define optional variables
DEFINE: VAR: vLatency:    0
DEFINE: VAR: vGroupCount: 1

# Define mandatory variables
DEFINE: VAR: kCyclesLabel2Fail: 0
DEFINE: VAR: kGroup:            0
DEFINE: VAR: kShift:            0
DEFINE: VAR: kMainCycle: 0
DEFINE:  VAR: kHRYStringLength: 5

# GSDS Output HRY_BIT_LIST
DEFINE: GSDS:   G.U.S.HRY_SCN_PCIE: 0,1,2,3,4

# Define algorithm: keep a stack
DEFINE: ALG: vOffset: kCyclesLabel2Fail vLatency -
DEFINE: ALG:  kGroup: vOffset vGroupCount mod
DEFINE: ALG:  kShift: vOffset vGroupCount / floor

##PATTERN SECTION

PAT: START: RPL_pre|precat|RPL_pst
0: [0-9a-zA-Z] : *: 0: PCIE : RESET
PAT: END: RPL_pre|precat|RPL_pst

PAT: START: pcie0
0: [0-9a-zA-Z]: *: 1: PCIE: PCIE0
PAT: END: pcie0

PAT: START: pcie1
0: [0-9a-zA-Z]: *: 2: PCIE: PCIE1
PAT: END: pcie1

PAT: START: pcie2
0: [0-9a-zA-Z]: *: 3: PCIE: PCIE2
PAT: END: pcie2

PAT: START: pcie3
0: [0-9a-zA-Z]: *: 4: PCIE: PCIE3
PAT: END: pcie3

# Define recovery config mapping
# Level0: Level1: Level2: Status      # Status options:  PASS = Must pass, FAIL = Must fail, DONOTCARE = Ignore;  Default if token is not listed is PASS
CONFIG_SET: START: PCIE
RESET: PASS
PCIE0: PASS
PCIE1: PASS
PCIE2: PASS
PCIE3: PASS
CONFIG_SET: END: PCIE

